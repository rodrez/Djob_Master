{% load static %}

<header class="w-full z-30">
    <div class="max-w-6xl mx-auto px-4 sm:px-6">
        <div class="flex items-center justify-between h-20">
            <div class="flex-shrink-0 mr-5">
                <a class="block" href="{% url 'home' %}" aria-label="Djob">
                    <img class="w-16" src="{% static 'images/DJob.png' %}"/>
                </a>
            </div>

            {% include 'extra_comps/signout_modal.html' %}

            <nav class="hidden md:flex md:flex-grow">
                <ul class="flex flex-wrap items-center font-medium mx-auto">
                    <li class="uppercase">
                        {% if user.is_authenticated %}
                            <button type="button"
                                    class="modal-open font-semibold inline-flex items-center justify-center w-full text-white px-2 rounded bg-black hover:bg-gray-800 hover:text-gray-200 dark:bg-white dark:text-black dark:hover:text-gray-100 py-2"
                            >
                                Logout
                            </button>
                            </li>
                            <li>
                                <a class="ml-3 font-medium w-full font-semibold inline-flex items-center justify-center border border-transparent px-4 py-2 my-2 rounded hover:border-b-4 hover:border-green-400 transition duration-150 ease-in-out"
                                   href="{% url 'job-post' %}">
                                    Add Job
                                    <span class="font-bold"> +</span></a>
                            </li>

                        {% else %}
                            <a class="flex uppercase font-semibold text-white transform hover:scale-105 hover:text-gray-100 dark:text-white dark:hover:text-gray-400 bg-purple-600 px-3 rounded py-2"
                               href="{% url 'account_login' %}">
                                Login
                            </a>
                        {% endif %}
                    {% if user.is_authenticated %}
                        <li>

                            <a class="text-gray-600 font-medium ml-auto hover:text-violet-500 dark:text-white dark:hover:text-violet-500 px-5 py-2 flex items-center transition duration-150 ease-in-out"
                               href="{% url 'jobs' %}">
                                My Jobs
                            </a>

                        </li>

                        <li>

                            <a class="text-gray-600 uppercase border-b-4 border-green-400 font-medium ml-auto hover:text-violet-500 dark:text-white dark:hover:text-violet-500 px-5 py-2 flex items-center transition duration-150 ease-in-out"
                               href="{% url 'profile' request.user.get_profile %}">
                                {{ request.user.username }}
                            </a>

                        </li>
                    {% endif %}
                    <li class="relative" x-data="{ open: false }" @mouseenter="open = true" @mouseleave="open = false">
                        <a class="text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-100 px-5 py-2 flex items-center transition duration-150 ease-in-out"
                           href="#0" aria-haspopup="true" :aria-expanded="open" @focus="open = true"
                           @focusout="open = false" @click.prevent>

                        </a>
                        <ul class="origin-top-right absolute top-full left-0 w-40 bg-white dark:bg-gray-800 shadow-lg py-2 ml-4 rounded hidden"
                            x-show="open" x-transition:enter="transition ease-out duration-200 transform"
                            x-transition:enter-start="opacity-0 -translate-y-2"
                            x-transition:enter-end="opacity-100 translate-y-0"
                            x-transition:leave="transition ease-out duration-200" x-transition:leave-start="opacity-100"
                            x-transition:leave-end="opacity-0" x-cloak>
                            <li>
                                <a class="text-sm text-gray-600 dark:text-gray-400 hover:text-teal-500 dark:hover:text-teal-500 flex py-2 px-4 leading-tight"
                                   href="help.html" @focus="open = true" @focusout="open = false">Help center</a>
                            </li>
                            <li>
                                <a class="text-sm text-gray-600 dark:text-gray-400 hover:text-teal-500 dark:hover:text-teal-500 flex py-2 px-4 leading-tight"
                                   href="404.html" @focus="open = true" @focusout="open = false">404</a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <div class="form-switch focus-within:outline-blue flex flex-col justify-center ml-3">
                    <input type="checkbox" name="light-switch" id="light-switch-desktop" class="light-switch sr-only"/>
                    <label class="relative bg-purple-600" for="light-switch-desktop"><span
                            class="relative bg-gradient-to-t from-gray-100 to-white dark:from-gray-800 dark:to-gray-700 shadow-sm z-10"
                            aria-hidden="true"></span>
                        <svg class="absolute inset-0" width="44" height="24" viewBox="0 0 44 24"
                             xmlns="http://www.w3.org/2000/svg">
                            <g class="fill-current text-white" fill-rule="nonzero" opacity=".88">
                                <path
                                        d="M32 8a.5.5 0 00.5-.5v-1a.5.5 0 10-1 0v1a.5.5 0 00.5.5zM35.182 9.318a.5.5 0 00.354-.147l.707-.707a.5.5 0 00-.707-.707l-.707.707a.5.5 0 00.353.854zM37.5 11.5h-1a.5.5 0 100 1h1a.5.5 0 100-1zM35.536 14.829a.5.5 0 00-.707.707l.707.707a.5.5 0 00.707-.707l-.707-.707zM32 16a.5.5 0 00-.5.5v1a.5.5 0 101 0v-1a.5.5 0 00-.5-.5zM28.464 14.829l-.707.707a.5.5 0 00.707.707l.707-.707a.5.5 0 00-.707-.707zM28 12a.5.5 0 00-.5-.5h-1a.5.5 0 100 1h1a.5.5 0 00.5-.5zM28.464 9.171a.5.5 0 00.707-.707l-.707-.707a.5.5 0 00-.707.707l.707.707z"/>
                                <circle cx="32" cy="12" r="3"/>
                                <circle fill-opacity=".4" cx="12" cy="12" r="6"/>
                                <circle fill-opacity=".88" cx="12" cy="12" r="3"/>
                            </g>
                        </svg>
                        <span class="sr-only">Switch to light / dark version</span></label>
                </div>
                <ul class="flex justify-end flex-wrap items-center">
                    <li>

                    </li>
                </ul>
            </nav>
            <div class="inline-flex md:hidden" x-data="{ expanded: false }">
                <div class="form-switch focus-within:outline-blue flex flex-col justify-center mr-6 -mt-0.5">
                    <input type="checkbox" name="light-switch" id="light-switch-mobile" class="light-switch sr-only"/>
                    <label class="relative bg-indigo-500" for="light-switch-mobile">
                        <span
                                class="relative bg-gradient-to-t from-gray-100 to-white dark:from-gray-800 dark:to-gray-700 shadow-sm z-10"
                                aria-hidden="true"></span>
                        <svg class="absolute inset-0" width="44" height="24" viewBox="0 0 44 24"
                             xmlns="http://www.w3.org/2000/svg">
                            <g class="fill-current text-white" fill-rule="nonzero" opacity=".88">
                                <path
                                        d="M32 8a.5.5 0 00.5-.5v-1a.5.5 0 10-1 0v1a.5.5 0 00.5.5zM35.182 9.318a.5.5 0 00.354-.147l.707-.707a.5.5 0 00-.707-.707l-.707.707a.5.5 0 00.353.854zM37.5 11.5h-1a.5.5 0 100 1h1a.5.5 0 100-1zM35.536 14.829a.5.5 0 00-.707.707l.707.707a.5.5 0 00.707-.707l-.707-.707zM32 16a.5.5 0 00-.5.5v1a.5.5 0 101 0v-1a.5.5 0 00-.5-.5zM28.464 14.829l-.707.707a.5.5 0 00.707.707l.707-.707a.5.5 0 00-.707-.707zM28 12a.5.5 0 00-.5-.5h-1a.5.5 0 100 1h1a.5.5 0 00.5-.5zM28.464 9.171a.5.5 0 00.707-.707l-.707-.707a.5.5 0 00-.707.707l.707.707z"/>
                                <circle cx="32" cy="12" r="3"/>
                                <circle fill-opacity=".4" cx="12" cy="12" r="6"/>
                                <circle fill-opacity=".88" cx="12" cy="12" r="3"/>
                            </g>
                        </svg>
                        <span class="sr-only">Switch to light / dark version</span></label>
                </div>
                <button class="hamburger" :class="{ 'active': expanded }" @click.stop="expanded = !expanded"
                        aria-controls="mobile-nav" :aria-expanded="expanded">
                    <span class="sr-only">Menu</span>
                    <svg class="w-6 h-6 fill-current text-gray-900 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-100 transition duration-150 ease-in-out"
                         viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <rect y="4" width="24" height="2" rx="1"/>
                        <rect y="11" width="24" height="2" rx="1"/>
                        <rect y="18" width="24" height="2" rx="1"/>
                    </svg>
                </button>
                <nav id="mobile-nav"
                     class="fixed top-0 h-screen z-20 left-0 w-full max-w-sm -ml-16 overflow-scroll bg-white dark:bg-gray-900 shadow-lg"
                     @click.away="expanded = false" @keydown.escape.window="expanded = false" x-show="expanded"
                     x-transition:enter="transition ease-out duration-200 transform"
                     x-transition:enter-start="opacity-0 -translate-x-full"
                     x-transition:enter-end="opacity-100 translate-x-0"
                     x-transition:leave="transition ease-out duration-200" x-transition:leave-start="opacity-100"
                     x-transition:leave-end="opacity-0" x-cloak>
                    <div class="py-6 pr-4 pl-20">

                        <a class="block" href="{% url 'home' %}" aria-label="Djob">
                            <img class="w-16" src="{% static 'images/DJob.png' %}"/>
                        </a>

                        <ul>
                            {% if user.is_authenticated %}

                                <li>
                                    <a class="flex mt-6 text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-100 py-2"
                                       href="{% url 'profile' request.user.get_profile %}">
                                        <span class="font-semibold h4">{{ request.user.username }}</span>
                                    </a>

                                </li>

                            {% endif %}
                            {% if user.is_authenticated %}
                                <li>

                                    <a class="text-gray-600 uppercase font-bold ml-auto hover:text-violet-500 dark:text-white dark:hover:text-violet-500 px-5 py-2 flex items-center transition duration-150 ease-in-out"
                                       href="{% url 'jobs' %}">
                                        My Jobs
                                    </a>

                                </li>
                                <li>
                                    <a class="font-medium w-full font-semibold inline-flex items-center justify-center border border-transparent px-4 py-2 my-2 rounded text-white bg-purple-600 hover:bg-violet-400 transition duration-150 ease-in-out"
                                       href="{% url 'job-post' %}">Add Job +</a>
                                </li>

                                <li>
                                    <button type="button"
                                            class="modal-open font-semibold inline-flex items-center justify-center w-full text-white px-2 rounded bg-black hover:bg-gray-800 hover:text-gray-200 dark:bg-white dark:text-black dark:hover:text-gray-100 py-2"
                                            onclick="displayModal('signoutModal')">
                                        Logout
                                    </button>
                                </li>
                            {% else %}
                                <li>
                                    <a class="font-medium mt-8 w-full font-semibold inline-flex items-center justify-center border border-transparent px-4 py-2 my-2 rounded text-white bg-purple-600 hover:bg-violet-400 transition duration-150 ease-in-out"
                                       href="{% url 'account_login' %}">Login</a>
                                </li>
                            {% endif %}
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</header>

<script>
    function displayModal(e) {
        var el = document.getElementById(e)
        el.classList.remove('hidden');
    }

    var openmodal = document.querySelectorAll('.modal-open')
    for (i = 0; i < openmodal.length; i++) {
        openmodal[i].addEventListener('click', function (event) {
            event.preventDefault()
            toggleModal()
        })
    }
</script>